package com.userSrvc.client.services.impl;

import java.nio.file.AccessDeniedException;
import java.util.Arrays;

import org.hibernate.PropertyValueException;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.web.client.RestTemplate;

import com.userSrvc.client.entities.EmailToken;
import com.userSrvc.client.entities.UUser;
import com.userSrvc.client.services.UserSrvcExt;

public class UserSrvcExtImpl implements UserSrvcExt {


	private static final String domain = "http://localhost:7001/usvc";

	public static void main(String...args) {
		final String uri = getUri("/user/get");
	    UUser entity = new UUser(0, null, "dapibus@in.net", "aa[B@d077e31");

		System.out.println(restCall(uri, entity, new UUser()));

	}
	
	private static final String getUri(String endpoint) {
		return domain + endpoint;
	}
	
	private static <E,R> R restCall(String uri, E entity, R returned) {
	     
	    RestTemplate restTemplate = new RestTemplate();
	     
	    HttpHeaders headers = new HttpHeaders();
	    headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));

   		R result = (R) restTemplate.postForObject(uri, entity, returned.getClass());
	    return result;
	}


	public <U extends UUser> U loginUser(U user) throws PropertyValueException, AccessDeniedException {
		return restCall(getUri("/user/login"), user, user);
	}

	public <U extends UUser> U getUser(U user) {
		// TODO Auto-generated method stub
		return null;
	}

	public <U extends UUser> U update(U user) throws PropertyValueException, AccessDeniedException {
		// TODO Auto-generated method stub
		return null;
	}

	public <U extends UUser> U authinticateUser(U user) throws AccessDeniedException {
		// TODO Auto-generated method stub
		return null;
	}

	public <U extends UUser> void updatePassword(U user) throws PropertyValueException, AccessDeniedException {
		// TODO Auto-generated method stub
		
	}

	public <U extends UUser> void resetPassword(U userUrl) {
		// TODO Auto-generated method stub
		
	}	
}
